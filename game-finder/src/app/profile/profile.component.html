<!--
    profile component HTML
-->

<div class="contents">
    <!-- <form id="profile-update" name="profile-update" action="" method="" ></form> -->   <!-- for input?? -->

    <!--
        contains pfp & (if user's page) edit symbol
        row display
    -->
    <div id="header-row">
        <!-- pfp & display name -->
        <div>
            <!-- profile picture -->
            <img [src]="getPFP()" alt="profile picture">

            <!-- display name, if editing replace with input box preloaded with current display name -->
            <h2 *ngIf="!editing">{{ displayName }}</h2>
            <input *ngIf="editing" class="block-input" placeholder="{{ displayName }}">
        </div>

        <div id="button-container">
            <!--
                edit symbol, click to enter editing mode
                only show if not currently editing AND on own page
            -->
            <mat-icon class="icon" *ngIf="sameUser && !editing" (click)="edit()">edit</mat-icon>
            

            <!-- if editing replace edit symbol with save and cancel buttons -->
            <button *ngIf="editing" (click)="save()" class="button" type="button" >save</button>
            <button *ngIf="editing" (click)="cancel()" class="button" type="button" >cancel</button>

            <!-- if not the same user: show friend and cancel buttons -->
            <button *ngIf="!sameUser" (click)="friend()" class="button" type="button" >friend</button>
            <button *ngIf="!sameUser" (click)="block()" class="button" type="button" >block</button>
        </div>
        

    </div>

    <!--
        contains profile info
        row display, split between tags & biography
        column display in mobile
    -->
    <div class="flex-row">
        <!-- email, location, status, & tags -->
        <div class="half-col">
            <!-- TODO hide email and location based on privacy settings -->

            <!-- 
                display email
                if editing, replace with input box and a dropdown (for privacy settings) preloaded with current values
                always visible if on own page
            -->
            <a *ngIf="(sameUser && !editing) || (!sameUser && emailVis=='Public')" href="mailto: {{ email }}"> {{ email }}</a>
            <div class="block-display" *ngIf="editing">
                <input type="email" placeholder="{{ email }}">
                <select name="email visibility">
                    <option value="" selected disabled hidden>{{ emailVis }}</option>
                    <option value="Public">Public</option>
                    <option value="Friends Only">Friends Only</option>
                    <option value="Private">Private</option>
                </select>
            </div>

            <!-- 
                display location
                if editing, replace with input box and a dropdown (for privacy settings) preloaded with current values
                always visible if on own page
            -->
            <p *ngIf="(sameUser && !editing) || (!sameUser && emailVis=='Public')">{{ location }}</p>
            <div class="block-display" *ngIf="editing">
                <input placeholder="{{ location }}">
                <select name="location visibility">
                    <option value="" selected disabled hidden>{{ locationVis }}</option>
                    <option value="Public">Public</option>
                    <option value="Friends Only">Friends Only</option>
                    <option value="Private">Private</option>
                </select>
            </div>

            <!-- status, if editing replace with dropdown preloaded with current value -->
            <div>
                <p style="display: inline;">Status: </p>
                <p *ngIf="!editing" style="display: inline;">{{ status }}</p>
                <select *ngIf="editing" name="status" style="display: inline;">
                    <option value="" selected disabled hidden>{{ status }}</option>
                    <option value="Currently in a Campaign">Currently in a Campaign</option>
                    <option value="Looking for a Campaign">Looking for a Campaign</option>
                </select>
            </div>

            Tags
            <!-- question circle, hover for info on tags -->
            <mat-icon 
                class="help"
                matTooltip="add tag explanation" 
                matTooltipPosition="after"
                matTooltipHideDelay="2000"
            >
                help_outline
            </mat-icon>
            

            <!-- edit button, click to open popup where you can edit tags -->
            <mat-icon class="icon" *ngIf="editing">edit</mat-icon>

            <!-- display tags -->
            <div class="flex-row">
                <!-- display all true tags -->
                <div class="tag" *ngFor="let tag of filterTags( this.tags )">
                    {{ tag }}
                </div>
            </div>

        </div>

        <!-- biography & availability -->
        <div class="half-col">
            <!-- profile biography, if editing replace with input box preloaded with current biography -->
            <p *ngIf="!editing">{{ bio }}</p>
            <textarea *ngIf="editing == true" class="block-display">{{ bio }}</textarea>

            <!-- timezone, change in settings -->
            {{ timezone }}

            <!-- question circle, hover for info on time blocks -->
            <mat-icon 
                class="help"
                matTooltip="add time block explanation" 
                matTooltipPosition="after"
                matTooltipHideDelay="2000"
            >
                help_outline
            </mat-icon>

            <!-- TODO display availability (as table?) -->
        </div>

    </div>

    <!--
        character links
        row display
        column display in mobile
    -->
    <div>
        <!-- display characters in row (for each?)-->
    </div>
</div>